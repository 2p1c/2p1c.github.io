# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

---

## [Unreleased]

### Added
- 组件化架构:导航栏和页脚现在作为独立组件动态加载,所有页面自动共享
- 页面加载动画:新增优雅的加载遮罩和旋转动画,提升用户体验
- **随机加载图标**:加载器现在会从 10 个 SVG 图标中随机选择一个显示,每次访问都有不同的视觉体验
- **缩放呼吸动画**:加载图标添加平滑的缩放呼吸效果(100% → 120% → 100%),增强动态感
- 骨架屏占位符:组件加载时显示动画占位符,避免布局跳动
- 开发文档 `COMPONENTS_README.md`:包含组件系统使用指南、工作原理和故障排除

### Changed
- 页面结构重构:所有页面的导航栏和页脚代码被提取为 `pages/components/nav.html` 和 `footer.html`
- 路径自动处理:组件加载器自动检测页面位置(主页/子页面)并调整资源路径
- **加载器图标路径**:支持主页和子页面的自动路径适配,确保图标在所有页面都能正确加载
- **加载时长优化**:最小显示时间从 500ms 降低到 300ms,加载体验更流畅
- 页脚定位调整:页脚改为固定定位(`position: fixed`),始终显示在视口底部

### Fixed
- 页面切换闪烁:完全消除页面加载时的无样式内容闪烁(FOUC)问题
- 平滑滚动失效:修复组件异步加载导致的滚动高度计算错误,现在会等待组件加载完成后再初始化
- 页脚显示异常:解决页脚被内容遮挡和 z-index 层级冲突问题
- 加载遮罩滚动条:修复加载动画显示时页面仍出现滚动条的问题
- **加载器重复显示**:修复页面内容可能被多次显示/隐藏的问题,添加状态锁防止重复执行
- **图标加载失败处理**:当 SVG 图标加载失败时,自动降级显示备用的旋转圆环动画

### Performance
- 组件并行加载:导航栏和页脚使用 `Promise.all` 并行加载,减少等待时间
- GPU 加速动画:使用 `translate3d` 和 `will-change` 优化滚动和过渡动画性能
- 事件防抖优化:窗口 resize 事件添加 150ms 防抖,减少不必要的重复计算
- **加载器超时保护**:添加 3 秒超时机制,确保即使加载失败页面内容也能正常显示

### Technical Details
- **加载器脚本** (`js/loader.js`):
  - 支持 10 个加载图标的随机选择机制
  - 图标文件命名规范:`assets/images/loader-1.svg` ~ `loader-10.svg`
  - 自动路径检测:根据页面路径(`/pages/`子目录)自动添加`../`前缀
  - 错误降级:图标加载失败时显示备用 CSS 动画
  - 防重复机制:使用 `isContentShown` 标志防止多次触发
  - 代码优化:移除所有调试日志,保持生产环境代码简洁

---

## [1.0.0] - 2025-01-06

### Added
- 初始版本发布
- 基础页面结构和 Google 风格导航栏、页脚
- 平滑滚动效果

---

**注**: Unreleased 版本包含重大架构升级和加载体验优化,建议查阅 `COMPONENTS_README.md` 了解新的开发流程。